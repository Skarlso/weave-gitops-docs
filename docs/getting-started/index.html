<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Weave GitOps Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Weave GitOps Blog Atom Feed"><title data-react-helmet="true">Getting Started | Weave GitOps</title><meta data-react-helmet="true" property="og:url" content="https://docs.gitops.weave.works//docs/getting-started"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Getting Started | Weave GitOps"><meta data-react-helmet="true" name="description" content="Let&#x27;s get an app deployed with Weave GitOps."><meta data-react-helmet="true" property="og:description" content="Let&#x27;s get an app deployed with Weave GitOps."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_150px.png"><link data-react-helmet="true" rel="canonical" href="https://docs.gitops.weave.works//docs/getting-started"><link data-react-helmet="true" rel="alternate" href="https://docs.gitops.weave.works//docs/getting-started" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.gitops.weave.works//docs/getting-started" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3b63372c.css">
<link rel="preload" href="/assets/js/runtime~main.741d0c22.js" as="script">
<link rel="preload" href="/assets/js/main.84a94e59.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Weave GitOps</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/installation">Installation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active navbar__link--active" href="/docs/getting-started">Getting Started</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/weaveworks/weave-gitops-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Weave GitOps</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/installation">Installation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active navbar__link--active" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a href="https://github.com/weaveworks/weave-gitops-docs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation">Installing the CLI</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/cli-reference">CLI Reference</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/troubleshooting">Troubleshooting</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/examples/helm">Helm Charts</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/gitops-automation">GitOps Automation Configuration</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Getting Started</h1></header><div class="markdown"><p>Let&#x27;s get an app deployed with <strong>Weave GitOps</strong>.</p><p><strong>This is Work In Progress</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h3><p>In this short guide, we will see how to get a simple workload running in a cluster using GitOps, and then make a change to that deployment and see it updated automatically
via GitOps. Further guides will then show how to move that workload into staging and/or production. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pre-requisites"></a>Pre-requisites<a class="hash-link" href="#pre-requisites" title="Direct link to heading">#</a></h2><p>At the moment, Weave GitOps supports <a href="https://github.com" target="_blank" rel="noopener noreferrer">Github</a>. </p><p><em><a href="https://gitlab.com" target="_blank" rel="noopener noreferrer">Gitlab</a> and other Git providers are coming soon.</em></p><p>To get this working you need:</p><ol><li>A Github account </li><li>A Github token and SSH key</li><li>kubectl installed </li><li>A development Kubernetes cluster (e.g. kind)</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="github-setup"></a>Github setup<a class="hash-link" href="#github-setup" title="Direct link to heading">#</a></h3><p>Weave GitOps works in a &quot;pull&quot; mode, which means that the GitOps runtime pulls the cluster configuration from Git. To do this, it needs an SSH key with access to your Github account. This key will be stored in the cluster as a secret, so it is recommended to create a new key for this.</p><p>Please follow the <a href="https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh" target="_blank" rel="noopener noreferrer">Github SSH key setup guide</a>.</p><p>You also need a Github Token with <code>repo</code> access. Please follow the <a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">Github guide</a></p><p>Make sure that the token is in your environment as <code>GITHUB_TOKEN</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="install-the-cli"></a>Install the CLI<a class="hash-link" href="#install-the-cli" title="Direct link to heading">#</a></h3><p>Please follow the instructions in the  <a href="/docs/installation">CLI installation page</a> to install the command-line tool.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getting-started-with-a-kind-cluster-and-podinfo-workload"></a>Getting Started with a Kind cluster and Podinfo workload<a class="hash-link" href="#getting-started-with-a-kind-cluster-and-podinfo-workload" title="Direct link to heading">#</a></h2><ol><li>If necessary create a kind cluster:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind create cluster</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Creating cluster &quot;kind&quot; ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Ensuring node image (kindest/node:v1.20.2) 🖼</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Preparing nodes 📦</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Writing configuration 📜</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Starting control-plane 🕹️</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Installing CNI 🔌</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Installing StorageClass 💾</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Set kubectl context to &quot;kind-kind&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">You can now use your cluster with:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cluster-info --context kind-kind</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Have a nice day! 👋</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You now will have the right <code>kubeconfig</code> for the kind cluster.</p><ol start="2"><li>Install Weave GitOps into the currently active Kubernetes cluster:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">wego install </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You should see:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">✚ generating manifests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ manifests build completed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">► installing components in wego-system namespace</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">◎ verifying installation</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The install will pause while the containers are loaded into the cluster. Once the system is verified you will see:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ notification-controller: deployment ready</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ image-reflector-controller: deployment ready</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ image-automation-controller: deployment ready</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ source-controller: deployment ready</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ kustomize-controller: deployment ready</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ helm-controller: deployment ready</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ install finished</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="4"><li>You can see what has been installed:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all --namespace wego-system</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                           READY   STATUS    RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm-controller-69667f94bc-52p8f               0/1     Running   0          110s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">image-automation-controller-6cd8b8fb95-4ft79   1/1     Running   0          110s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">image-reflector-controller-55fb577bf9-r2c98    1/1     Running   0          110s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kustomize-controller-6977b8cdd4-4m9wr          1/1     Running   0          110s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">notification-controller-5c4d48f476-5cv64       1/1     Running   0          110s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">source-controller-b4b88948f-47b5r              1/1     Running   0          110s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="5"><li>Fork the podinfo repository:
Fork the following repository on Github:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://github.com/stefanprodan/podinfo</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="6"><li>Clone the fork using SSH:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">git clone git@github.com:&lt;yr-org-goes-here&gt;/podinfo.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd podinfo</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>(replace the <code>&lt;yr-org-goes-here&gt;</code> with your own userid or organization)</p><p>Take a quick look at the podinfo layout. There are multiple different directories with k8s deployment YAMLs.
We want to use the YAMLs in <code>deploy/webapp</code>.</p><ol start="7"><li>Configure Weave GitOps to deploy the repository</li></ol><p>We need to configure Weave GitOps to deploy the application from <code>deploy/webapp</code> on branch <code>master</code> of the repository at <code>.</code> using your private key</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">wego app add . --path=deploy/webapp --branch=master  --private-key=&lt;created private key file&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You should see something like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Updating parameters from environment... using URL: &#x27;ssh://git@github.com/pzfreo/podinfo.git&#x27; of origin from git config...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Checking cluster status... FluxInstalled</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✚ deploy key: ssh-ed25519 xxxx/yyyy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">► secret &#x27;podinfo&#x27; created in &#x27;wego-system&#x27; namespace</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: source.toolkit.fluxcd.io/v1beta1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: GitRepository</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: podinfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: wego-system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  interval: 30s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ref:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    branch: master</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  secretRef:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: podinfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  url: ssh://git@github.com/pzfreo/podinfo.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: kustomize.toolkit.fluxcd.io/v1beta1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Kustomization</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: kind-kind-podinfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: wego-system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  interval: 1m0s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  path: ./wego/targets/kind-kind</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  prune: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sourceRef:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: GitRepository</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: podinfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  validation: client</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: kustomize.toolkit.fluxcd.io/v1beta1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Kustomization</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: podinfo-deploy-webapp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: wego-system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  interval: 1m0s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  path: ./wego/apps/podinfo-deploy-webapp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  prune: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sourceRef:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: GitRepository</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: podinfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  validation: client</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: kustomize.toolkit.fluxcd.io/v1beta1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Kustomization</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: podinfo-deploy-webapp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: wego-system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  interval: 1m0s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  path: ./deploy/webapp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  prune: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sourceRef:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: GitRepository</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: podinfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  validation: client</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Commiting and pushing wego resources for application...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Pushing app manifests to repository</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="8"><li>This will have created a <code>.wego</code> directory in your repository (you can configure where this goes - see <a href="/docs/gitops-automation">GitOps Automation configuration</a>)</li></ol><p>This directory contains the GitOps Automation configuration. </p><p>If you do a tree inside this directory you should see something like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ tree .wego/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">.wego/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├── apps</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── podinfo-deploy-webapp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│       └── app.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└── targets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    └── kind-kind</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        └── podinfo-deploy-webapp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            └── podinfo-deploy-webapp-gitops-runtime.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">5 directories, 2 files</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Notice that wego has automatically named the app <code>podinfo-deploy-webapp</code>. You can change this with the <code>--name</code> option on the <code>wego app add</code> command.</p><p>You can find out more about these YAMLs and the <code>.wego</code> directory <a href="/docs/gitops-automation">here</a>.</p><ol start="8"><li>Wait for the workload to show up in the cluster:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods --namespace webapp</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                       READY   STATUS    RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">backend-5cd878f8dd-6dhsg   1/1     Running   0          2m32s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-ff74574fc-4jfpt   1/1     Running   0          2m32s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="9"><li>You can use the <code>wego app status</code> command to see the reconciliation:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">wego app status podinfo-deploy-webapp</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Latest successful deployment time: 2021-06-07T18:46:49Z
NAMESPACE  	NAME                               	READY	MESSAGE                                                          	REVISION                                       	SUSPENDED
wego-system	kustomization/podinfo-deploy-webapp	True 	Applied revision: master/a5023086275d2dbd79e2cbc6db1e626a1e846e59	master/a5023086275d2dbd79e2cbc6db1e626a1e846e59	False</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">This shows you when the last deployment was as well as the specific SHA from Git that has been deployed.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">You have successfully deployed the app!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">10. To access the `podinfo` UI you can set up a port forward into the pod.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">```console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward service/frontend 8000:80 --namespace webapp</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Forwarding from 127.0.0.1:8000 -&gt; 9898</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Forwarding from [::1]:8000 -&gt; 9898</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now you can browse <a href="http://localhost:8000" target="_blank" rel="noopener noreferrer">`http://localhost:8000&#x27;</a></p><ol start="11"><li>The real aim of GitOps is not just to deploy once, but to reconcile as well. Let&#x27;s test that out.
Edit <code>deploy/webapp/frontend/deployment.yaml</code></li></ol><p>Change the <code>PODINFO_UI_COLOR</code> to grey:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> PODINFO_UI_COLOR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;#888888&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="12"><li>Commit the change to your forked repository.</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">git add .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git commit -m &quot;change color&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git push</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="13"><li>Wait for the reconciliation to take place</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">wego app status podinfo-deploy-webapp</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Latest successful deployment time: 2021-06-07T19:05:21Z</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAMESPACE   NAME                                READY   MESSAGE                                                             REVISION                                        SUSPENDED</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wego-system kustomization/podinfo-deploy-webapp True    Applied revision: master/21e671e1b8794741ec3773e8a4e7ec4abb1e8ff5   master/21e671e1b8794741ec3773e8a4e7ec4abb1e8ff5 False</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="14"><li>You should see the pods recycle </li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods --namespace webapp</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                       READY   STATUS              RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">backend-5cd878f8dd-rl64h   1/1     Running             0          33m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-5c45876f-pnxrq    1/1     Running             0          6m51s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-ff74574fc-7ntw4   0/1     ContainerCreating   0          1s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>And a little later:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                       READY   STATUS        RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">backend-5cd878f8dd-rl64h   1/1     Running       0          34m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-5c45876f-pnxrq    0/1     Terminating   0          7m9s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-ff74574fc-7ntw4   1/1     Running       0          19s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Notice that the backend has not changed and so the backend pod is not affected.</p><p>Restart the port forward and you will see the color has changed.</p><ol start="12"><li>Congratulations </li></ol><p>You have successfully demonstrated GitOps using Weave GitOps! Well done.</p><ol start="13"><li>Next you might like to try using <a href="/docs/examples/helm">GitOps with Helm</a></li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/weaveworks/weave-gitops-docs/edit/main/docs/getting-started.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Installing the CLI</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/cli-reference"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CLI Reference »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#pre-requisites" class="table-of-contents__link">Pre-requisites</a><ul><li><a href="#github-setup" class="table-of-contents__link">Github setup</a></li><li><a href="#install-the-cli" class="table-of-contents__link">Install the CLI</a></li></ul></li><li><a href="#getting-started-with-a-kind-cluster-and-podinfo-workload" class="table-of-contents__link">Getting Started with a Kind cluster and Podinfo workload</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Support</h4><ul class="footer__items"><li class="footer__item"><a href="mailto:support@weave.works" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Weaveworks</div></div></div></footer></div>
<script src="/assets/js/runtime~main.741d0c22.js"></script>
<script src="/assets/js/main.84a94e59.js"></script>
</body>
</html>